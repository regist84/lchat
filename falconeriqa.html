<html>
   <head>
      <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" Access-Control-Allow-Origin="*"/>
   </head>
   <body>
      <div style="height: 200%;border-style: dashed"> TEST DIV </div>
<script type='text/javascript' src='https://service.force.com/embeddedservice/menu/fab.min.js'></script>
<script type='text/javascript'>        
    var initESW = function(gslbBaseURL) {
      embedded_svc.menu.settings.language = "it";
      embedded_svc.menu.chat.settings.paramName = "";
      embedded_svc.menu.chat.settings.paramMail = "";
      embedded_svc.menu.chat.settings.paramBrand = "05";
      embedded_svc.menu.chat.settings.paramCountry = "IT";
       embedded_svc.menu.chat.settings.paramDebug = true;
      // 0 default,1, 2 => Middle
      var paramMobPosition = 0;
      embedded_svc.menu.init(
       'https://calzedoniagroup--QA.my.salesforce.com',
       'https://d.la3-c1cs-cdg.salesforceliveagent.com/chat',
       gslbBaseURL,
       '00D4E0000008dvx',
       'Falconeri_IT',
          {
              pageName: 'PrechatSnip',
          }
        );
        var styleEmb = document.createElement('style');
        styleEmb.type = 'text/css';
        styleEmb.innerHTML = '.embedded-service .channelmenu_ctas li a { font-size: small;font-weight: normal;}';
        styleEmb.innerHTML += ' .embedded-service {visibility:hidden; !important}';
        styleEmb.innerHTML += ' .embedded-serviceHidden  { visibility:hidden !important;}';
        styleEmb.innerHTML += ' .embedded-serviceActive  { visibility:visible !important;}';
        styleEmb.innerHTML = ' .embedded-service .fab:hover:before, .embedded-service .fab:focus:before { background-color: #FFFFFF !important;}';
        styleEmb.innerHTML = ' .embedded-service .fab:focus { background-color: #FFFFFF !important; box-shadow: 2px 2px 5px 0 rgba(45,45,45,0.5) !important;}';
        let  isMobile = new RegExp('(?:^|\\s)Android', 'i').test(navigator.userAgent) || new RegExp('(?:^|\\s)Mobile', 'i').test(navigator.userAgent) ||  new RegExp('(?:^|\\s)iOS', 'i').test(navigator.userAgent);
        if(!isMobile){        
           //Style innerHTML button menu  
           styleEmb.innerHTML += ' .embedded-service .fab {bottom: 90px !important;right: 20px !important;}';
          //menu items
           styleEmb.innerHTML += ' .embedded-service .channelmenu {bottom: 165px !important;}';
          //menu minimize button
           styleEmb.innerHTML += ' .embeddedServiceSidebarMinimizedFabDefaultUI .content {right: 20px !important;}';
           styleEmb.innerHTML += ' .embeddedServiceSidebarMinimizedFabDefaultUI {bottom: 90px !important;right:20px !important;}';
          //chat container
          styleEmb.innerHTML += ' .embeddedServiceSidebar.layout-float .dockableContainer {bottom:165px !important;}';
        }else{
          if(paramMobPosition == 1){
             //Style innerHTML button menu (Checkout)
             styleEmb.innerHTML += ' .embedded-service .fab {bottom: 90px !important;right: 20px !important;z-index:999 !important;}';
            //menu items
            styleEmb.innerHTML += ' .embedded-service .channelmenu {bottom: 90px !important;z-index:998 !important;display: initial !important;}';
            //menu minimize button
            styleEmb.innerHTML += ' .embeddedServiceSidebarMinimizedFabDefaultUI .content {right: 20px !important;}';
            styleEmb.innerHTML += ' .embeddedServiceSidebarMinimizedFabDefaultUI {bottom: 90px !important;right:20px !important;}';
          }else if(paramMobPosition == 2){
            //Style innerHTML button menu Middle (Product page)  
            styleEmb.innerHTML += ' .embedded-service .fab {bottom: 90px !important;right: 20px !important;z-index:999 !important;}';
            //menu items
            styleEmb.innerHTML += ' .embedded-service .channelmenu {bottom: 90px !important;z-index:998 !important;display: initial !important;}';
            //menu minimize button
            styleEmb.innerHTML += ' .embeddedServiceSidebarMinimizedFabDefaultUI .content {right: 20px !important;}';
            styleEmb.innerHTML += ' .embeddedServiceSidebarMinimizedFabDefaultUI {bottom: 90px !important;right:20px !important;}';   
          }else{
            //Style innerHTML button menu  
            styleEmb.innerHTML += ' .embedded-service .fab {bottom: 20px !important;right: 20px !important;z-index:999 !important;}';
            //menu items
            styleEmb.innerHTML += ' .embedded-service .channelmenu {bottom: 95px !important;z-index:998 !important;display: initial !important;}';
            //menu minimize button
            styleEmb.innerHTML += ' .embeddedServiceSidebarMinimizedFabDefaultUI .content {right: 20px !important;}';
            styleEmb.innerHTML += ' .embeddedServiceSidebarMinimizedFabDefaultUI {bottom: 20px !important;right:20px !important;}'; 
          }
        }
        document.getElementsByTagName('head')[0].appendChild(styleEmb);
    /*var scrollInit = 0;
       document.addEventListener('scroll',
     (event) => {
        if(document.getElementById("embedded-service")){
          let elemEmb = document.getElementById("embedded-service");
          if(scrollInit < window.scrollY){
             if (elemEmb.classList.contains('embedded-serviceHidden')){
                elemEmb.classList.remove('embedded-serviceHidden');
             }
             elemEmb.classList.add('embedded-serviceActive');
          }else if(scrollInit != window.scrollY ){
              let isMenuVisible = document.getElementById("esw-channelmenu") && document.getElementById("esw-channelmenu").classList.contains('showAnimation');
             if(!isMenuVisible){
                if (elemEmb.classList.contains('embedded-serviceActive') ){
                  elemEmb.classList.remove('embedded-serviceActive');
                }
                elemEmb.classList.add('embedded-serviceHidden');
             }
          }
        }
        scrollInit = window.scrollY;
    },
       { passive: true }
     );*/
        
};

  if (!window.embedded_svc || !window.embedded_svc.menu) {
      var s = document.createElement('script');
      s.setAttribute('src', 'https://calzedoniagroup--QA.my.salesforce.com/embeddedservice/menu/fab.min.js');
      s.onload = function() {
          initESW(null);
      };
      document.body.appendChild(s);

  } else {
      initESW('https://service.force.com');
  }
</script>
      </body>
 </html>
