<html>
   <head>
      <meta Access-Control-Allow-Origin="*" content="width=device-width, initial-scale=1, minimum-scale=1" name="viewport" />
   </head>
   <body>
<a href='https://regist84.github.io/lchat/goldeneechat.html'>CHAT PAGE LINK</a>
<script src="https://service.force.com/embeddedservice/menu/fab.min.js" type="text/javascript"></script>

<script type="text/javascript">
   
   function getMapParam (){
      var mapParam = new Object(); 
      var hrefString = window.location.href;
      var prmstr = window.location.search;

      prmstr = prmstr.substr(1, prmstr.length);
      var prmarr = prmstr.split("&");
      for ( var i = 0; i < prmarr.length; i++) {
         var tmparr = prmarr[i].split("=");
         mapParam[tmparr[0]] = tmparr[1];   
      }
      return mapParam;
    }		
   
   
    var initESW = function(gslbBaseURL) {
       var mapParam = getMapParam(); 
       let paramLanguage = 'it';
       	if(mapParam['lang']){
		paramLanguage = mapParam['lang'];
	}
       let buttonName = 'Channel_Menu_IT_IT';
       	if(mapParam['name']){
		buttonName = mapParam['name'];
	}
	var paramCountry = "IT";
	if(mapParam['country']){
		paramCountry = mapParam['country'];  
	}
	    
	    console.log('paramCountry: ' + paramCountry);
	    console.log('buttonName: ' + buttonName);
	    console.log('paramLanguage: ' + paramLanguage);
      
      embedded_svc.menu.settings.language = paramLanguage; 
      embedded_svc.menu.chat.settings.paramCountry = paramCountry;
        embedded_svc.menu.init(
                'https://goldengoose.my.salesforce.com',
                'https://d.la2-c2-cdg.salesforceliveagent.com/chat',
                gslbBaseURL,
                '00D3X0000047cTS',
                buttonName,
                {pageName: 'snipPre'}
        );
        
    };

    if (!window.embedded_svc || !window.embedded_svc.menu) {
            var s = document.createElement('script');
            s.setAttribute('src', 'https://goldengoose.my.salesforce.com/embeddedservice/menu/fab.min.js');
            s.onload = function() {
                    initESW(null);
            };
            document.body.appendChild(s);
            
    } else {
            initESW('https://service.force.com');
            
    }
</script>
 </body>
</html>
